{"version":3,"sources":["webpack:///main-bundle.529a7d8575854268546d.js","webpack:///webpack/bootstrap 529a7d8575854268546d","webpack:///./client/index.ts","webpack:///./node_modules/mighty-polling-socket-server/dist-esm/socket.js","webpack:///./node_modules/mighty-polling-socket-server/dist-esm/socket-client.js","webpack:///./client/lib/notification.ts","webpack:///./client/lib/dom.ts","webpack:///./client/lib/rss.ts","webpack:///./client/models/message-base.ts","webpack:///./client/models/service-disruption.ts","webpack:///./client/models/emergency-message.ts"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0__message_base__","__WEBPACK_IMPORTED_MODULE_1__service_disruption__","__WEBPACK_IMPORTED_MODULE_2__emergency_message__","__WEBPACK_IMPORTED_MODULE_0__socket__","__WEBPACK_IMPORTED_MODULE_1__socket_client__","_toConsumableArray","arr","Array","isArray","arr2","length","from","value","__WEBPACK_IMPORTED_MODULE_0_mighty_polling_socket_server__","__WEBPACK_IMPORTED_MODULE_1__styles_main_scss__","__WEBPACK_IMPORTED_MODULE_2__lib__","__WEBPACK_IMPORTED_MODULE_3__models__","rss","toast","client","emergencyMessageBar","document","getElementById","emergencyFeedMessage","serviceDisruptionMessage","onNotify","secondsLeft","countdownDone","elements","concat","this","childNodes","countdownEl","find","el","classList","contains","innerHTML","ticker","setInterval","clearInterval","onDismiss","location","assign","on","_ref","data","viewedBefore","checkViewStatus","rssItems","parseItems","item","html","map","link","title","mediaContent","mediaDescription","pubDate","join","notify","duration","className","position","right","bottom","_ref2","description","_html2","SocketConnection","url","endpoint","location_1","host","protocol","port","replace","connection","WebSocket","onMessage","callback","onmessage","close","send","what","SocketPollClient","__WEBPACK_IMPORTED_MODULE_0____","_typeCallbacks","type","addSocketListener","_this","event","console","log","eventData","JSON","parse","__WEBPACK_IMPORTED_MODULE_0__notification__","__WEBPACK_IMPORTED_MODULE_2__rss__","_classCallCheck","instance","Constructor","TypeError","Notification","__WEBPACK_IMPORTED_MODULE_0__styles_notification_scss__","_createClass","defineProperties","target","props","descriptor","writable","key","protoProps","staticProps","_defaults","arguments","undefined","message","options","_options","_notification","_getNotification","_transitionIn","setTimeout","_transitionOut","notificationClasses","_getNotificationClasses","template","createElement","content","firstChild","_this2","disableAnimation","body","appendChild","apply","remove","add","_this3","removeChild","_this4","keys","forEach","push","DomBuddy","to","_to","it","insertAdjacentHTML","_normalize","before","after","how","then","toString","NodeList","outerHTML","Node","querySelectorAll","Error","RSSUtility","transform","channelItems","channel","cookieName","COOKIE_NAME","encodeURIComponent","cookieDate","Date","getTime","err","warn","_getCookie","_setCookie","cookie","parts","split","pop","shift","date","setTime","toUTCString","MessageBase","dateString","months","getMonth","getDate","getFullYear","leadingZero","getHours","getMinutes","number","obj","reduce","result","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","TYPE_DISRUPTION","ServiceDisruption","_slicedToArray","sliceIterator","_arr","_n","_d","_e","_s","_i","Symbol","iterator","next","done","_MessageBase","getPrototypeOf","extractContent","_ref$title","_ref$description","_ref$link","_ref$guid","guid","_","_ref$summary","summary","_ref$article","article","_ref$pubDate","rawCategory","category","rawMedia","media","_rawMedia","_rawMedia$0$$","$","formatDate","TYPE_EMERGENCY","EmergencyMessage"],"mappings":"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","file":"main-bundle.529a7d8575854268546d.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__message_base__ = __webpack_require__(11);\n/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_0__message_base__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__service_disruption__ = __webpack_require__(12);\n/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return __WEBPACK_IMPORTED_MODULE_1__service_disruption__[\"a\"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return __WEBPACK_IMPORTED_MODULE_1__service_disruption__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__emergency_message__ = __webpack_require__(13);\n/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_2__emergency_message__[\"a\"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return __WEBPACK_IMPORTED_MODULE_2__emergency_message__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__weather_alert__ = __webpack_require__(14);\n/* unused harmony namespace reexport */\n\n\n\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__socket__ = __webpack_require__(3);\n/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_0__socket__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__socket_client__ = __webpack_require__(4);\n/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_1__socket_client__[\"a\"]; });\n\n\n//# sourceMappingURL=index.js.map\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_mighty_polling_socket_server__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__styles_main_scss__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__styles_main_scss___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__styles_main_scss__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__lib__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__models__ = __webpack_require__(0);\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\n\n\n\nvar REDIRECT_URL = 'http://uoit.ca/emergency';\nvar rss = new __WEBPACK_IMPORTED_MODULE_2__lib__[\"b\" /* RSSUtility */]();\nvar toast = new __WEBPACK_IMPORTED_MODULE_2__lib__[\"a\" /* Notification */]();\nvar client = new __WEBPACK_IMPORTED_MODULE_0_mighty_polling_socket_server__[\"b\" /* SocketPollClient */]();\n/**\n * Hold references to all feed containers (also provides a null checks).\n */\nvar emergencyMessageBar = document.getElementById('emergencyMessageBar');\nvar emergencyFeedMessage = document.getElementById('emergencyFeedMessage');\nvar serviceDisruptionMessage = document.getElementById('serviceDisruptionMessage');\n/**\n * A bind-ready function for running a 5-second countdown\n * inside the notification displayed before emergency message\n * redirects, to notify of impending redirection.\n */\nvar onNotify = function startCountdown() {\n    var secondsLeft = 5,\n        countdownDone = false;\n    var elements = [].concat(_toConsumableArray(this.childNodes));\n    var countdownEl = elements.find(function (el) {\n        return el.classList && el.classList.contains('countdown');\n    });\n    countdownEl.innerHTML = secondsLeft + ' seconds';\n    var ticker = setInterval(function () {\n        secondsLeft--;\n        countdownDone = secondsLeft === 0;\n        countdownEl.innerHTML = countdownDone ? 'Now!' : secondsLeft + ' seconds';\n        countdownDone && clearInterval(ticker);\n    }, 1000);\n};\n/**\n * Performs a redirect after notification has been dismissed.\n */\nvar onDismiss = function onDismiss() {\n    return document.location.assign(REDIRECT_URL);\n};\n/**\n * Listens to incoming service disruption socket data. Responsible for\n * mapping `ServiceDisruptionRSSItem` objects to more useful `ServiceDisruption`\n * instances, and building a templated list from the items (if any).\n */\nclient.on(__WEBPACK_IMPORTED_MODULE_3__models__[\"d\" /* TYPE_DISRUPTION */], function (_ref) {\n    var data = _ref.data;\n\n    /** Sets and compares a cookie of last viewed pubDate */\n    var viewedBefore = rss.checkViewStatus(__WEBPACK_IMPORTED_MODULE_3__models__[\"d\" /* TYPE_DISRUPTION */], data);\n    if (serviceDisruptionMessage) {\n        var rssItems = rss.parseItems(data, function (item) {\n            return new __WEBPACK_IMPORTED_MODULE_3__models__[\"c\" /* ServiceDisruption */](item);\n        });\n        if (rssItems.length) {\n            var html = rssItems.map(function (item) {\n                return '<div class=\"emergencyNewsItem\">\\n        <a href=\"' + item.link + '\" title=\"' + item.title + '\"><img src=\"' + item.mediaContent + '\" alt=\"' + item.mediaDescription + '\" width=\"100\" height=\"67\"></a>\\n        <p><strong><a href=\"' + item.link + '\">' + item.title + '</strong></a></p>\\n        <p class=\"date\">' + item.pubDate + '</p>\\n      </div>';\n            }).join('\\n');\n            serviceDisruptionMessage.innerHTML = html;\n        }\n        // } else {\n        if (!viewedBefore) {\n            /** If not viewed, show notification and redirect to new page */\n            var _html = '<span class=\"icon_emergency warning text-larger\"></span>\\n        <strong>Notice:</strong> A new service disruption has been posted! \\n        <a href=\"#\"><strong>More info &raquo;</strong></a>';\n            toast.notify(_html, {\n                duration: 8000,\n                className: 'warning',\n                position: {\n                    right: true,\n                    bottom: true\n                }\n            });\n        }\n    }\n});\n/**\n * Listens to incoming emergency message socket data. Responsible for\n * mapping `RSSItem` objects to more useful `EmergencyMessage`\n * instances, and building a templated list from the items (if any).\n *\n * Checks and tracks view status of last received message; if last\n * has not been tracked as viewed, prompts user with a notification\n * and redirects to a new page. If already viewed, displays info bar.\n */\nclient.on(__WEBPACK_IMPORTED_MODULE_3__models__[\"e\" /* TYPE_EMERGENCY */], function (_ref2) {\n    var data = _ref2.data;\n\n    /** Sets and compares a cookie of last viewed pubDate */\n    var viewedBefore = rss.checkViewStatus(__WEBPACK_IMPORTED_MODULE_3__models__[\"e\" /* TYPE_EMERGENCY */], data);\n    var rssItems = rss.parseItems(data, function (item) {\n        return new __WEBPACK_IMPORTED_MODULE_3__models__[\"a\" /* EmergencyMessage */](item);\n    });\n    if (rssItems.length) {\n        if (emergencyFeedMessage) {\n            var html = rssItems.map(function (item) {\n                return '<p class=\"emergencyTitle\">' + item.title + '</p>\\n        <p class=\"emergencyDesc\">' + item.description + '</p>\\n        <p class=\"emergencyDate\">' + item.pubDate + '</p>';\n            }).join('\\n');\n            emergencyFeedMessage.innerHTML = html;\n        }\n        if (emergencyMessageBar && viewedBefore) {\n            /** If viewed before, just display info bar */\n            var _html2 = rssItems.map(function (item) {\n                return '<div class=\"row\">\\n        <a href=\"' + REDIRECT_URL + '\">\\n          <div class=\"emergencyAlert\">\\n          Emergency Alert\\n          </div>\\n          <div class=\"emergencyMessage\">\\n            <span class=\"emergencyTitle\">' + item.title + '</span>\\n            <span class=\"emergencyDesc\">' + item.description + '</span>\\n            <span class=\"emergencyDate\">' + item.pubDate + '</span>\\n          </div>\\n        </a>\\n      </div>';\n            }).join('\\n');\n            emergencyMessageBar.innerHTML = _html2;\n        }\n        if (!viewedBefore) {\n            /** If not viewed, show notification and redirect to new page */\n            var _html3 = '<span class=\"icon_emergency alert text-larger\"></span>\\n        <strong>Notice:</strong> You are about to be redirected to an emergency message!\\n        <br/><small>Redirecting in:</small> <strong class=\"countdown\"></strong>';\n            toast.notify(_html3, {\n                duration: 5000,\n                className: 'alert',\n                position: {\n                    right: true,\n                    bottom: true\n                },\n                onNotify: onNotify,\n                onDismiss: onDismiss\n            });\n        }\n    }\n});\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return SocketConnection; });\n/**\n * Base class for providing a simple proxy to an instantiated\n * `WebSocket` connection.\n *\n * @export\n * @class SocketConnection\n */\nvar SocketConnection = /** @class */ (function () {\n    function SocketConnection(url, endpoint) {\n        if (!url) {\n            var location_1 = document.location;\n            var host = location_1.host, protocol = location_1.protocol, port = location_1.port;\n            url = protocol.replace(/http/, 'ws') + \"//\" + host.replace(/:.*/, '') + (port ? ':8080' : '');\n        }\n        url = url + \"/\" + (endpoint || '');\n        this.connection = new WebSocket(url);\n    }\n    SocketConnection.prototype.onMessage = function (callback) {\n        this.connection.onmessage = callback;\n    };\n    SocketConnection.prototype.close = function () {\n        this.connection.close();\n    };\n    SocketConnection.prototype.send = function (what) {\n        this.connection.send(what);\n    };\n    return SocketConnection;\n}());\n\n//# sourceMappingURL=socket.js.map\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return SocketPollClient; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0____ = __webpack_require__(1);\n\n/**\n * This class represents the base hub for all socket poll related\n * messaging and action. Its primary purpose is to pre-initialize a\n * socket connection, as well as provide callback functions for all\n * configured message types.\n *\n * @example\n * // configure a message type\n * const TYPE_EMERGENCY = 'emergency';\n * // initialize a new feed\n * const feed = new SocketPollClient();\n * // assign an action to a message type\n * feed.on(TYPE_EMERGENCY, items => {...});\n *\n * @export\n * @class SocketPollClient\n */\nvar SocketPollClient = /** @class */ (function () {\n    function SocketPollClient() {\n        this._typeCallbacks = {};\n    }\n    /**\n     * @template T\n     * @param {string} type\n     * @param {(items: T) => void} callback\n     * @memberof SocketPollClient\n     */\n    SocketPollClient.prototype.on = function (type, callback) {\n        this._typeCallbacks[type] = callback;\n        this.addSocketListener(type);\n    };\n    /**\n     * Initializes event listener for socket messages with the\n     * pre-initialized socket connection; passes event data from\n     * message to this class' `onMessage` method.\n     *\n     * @private\n     * @template T\n     * @template D\n     * @param {T} type\n     * @memberof SocketPollClient\n     */\n    SocketPollClient.prototype.addSocketListener = function (type) {\n        var _this = this;\n        var socket = new __WEBPACK_IMPORTED_MODULE_0____[\"a\" /* SocketConnection */](null, type);\n        socket.onMessage(function (event) { return _this.onMessage(type, event); });\n        console.log(\"[socket] added listener for \\\"\" + type + \"\\\"\");\n    };\n    /**\n     * Receives a socket's `MessageEvent`; parses the raw string data\n     * into a usable object; determines the type of emergency message\n     * and calls the appropriate callback with the parsed data as its\n     * first argument.\n     *\n     * @private\n     * @template T\n     * @template D\n     * @param {T} type\n     * @param {MessageEvent} event\n     * @memberof SocketPollClient\n     */\n    SocketPollClient.prototype.onMessage = function (type, event) {\n        var eventData = JSON.parse(event.data);\n        console.log(\"[socket] \" + eventData.type + \" message received\", eventData);\n        this._typeCallbacks[type](eventData);\n    };\n    return SocketPollClient;\n}());\n\n//# sourceMappingURL=socket-client.js.map\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__notification__ = __webpack_require__(7);\n/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_0__notification__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__dom__ = __webpack_require__(9);\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__rss__ = __webpack_require__(10);\n/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_2__rss__[\"a\"]; });\n\n\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Notification; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__styles_notification_scss__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__styles_notification_scss___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__styles_notification_scss__);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\nvar Notification = function () {\n    function Notification() {\n        var _defaults = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _classCallCheck(this, Notification);\n\n        this._defaults = _defaults;\n    }\n\n    _createClass(Notification, [{\n        key: 'notify',\n        value: function notify(message) {\n            var _this = this;\n\n            var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n            this._options = Object.assign({}, this._defaults, options);\n            this._notification = this._getNotification(message);\n            this._transitionIn();\n            if (this._options.duration) {\n                setTimeout(function () {\n                    _this._transitionOut();\n                }, this._options.duration);\n            }\n            return this;\n        }\n    }, {\n        key: 'dismiss',\n        value: function dismiss() {\n            this._transitionOut();\n        }\n    }, {\n        key: '_getNotification',\n        value: function _getNotification(message) {\n            var notificationClasses = this._getNotificationClasses();\n            var template = document.createElement('template');\n            template.innerHTML = '<div data-closable class=\"callout alert-callout ' + notificationClasses + '\">\\n      ' + message + '\\n      <button class=\"close-button\" aria-label=\"Dismiss alert\" type=\"button\" data-close>\\n        <span aria-hidden=\"true\">\\u2297</span>\\n      </button>\\n    </div>';\n            return template.content.firstChild;\n        }\n    }, {\n        key: '_transitionIn',\n        value: function _transitionIn() {\n            var _this2 = this;\n\n            if (this._options.disableAnimation) {\n                document.body.appendChild(this._notification);\n                this._options.onNotify && this._options.onNotify.apply(this._notification);\n            } else {\n                this._notification.classList.remove('fadeOutUp');\n                this._notification.classList.add('fadeInDown');\n                document.body.appendChild(this._notification);\n                setTimeout(function () {\n                    _this2._options.onNotify && _this2._options.onNotify.apply(_this2._notification);\n                }, 1000);\n            }\n        }\n    }, {\n        key: '_transitionOut',\n        value: function _transitionOut() {\n            var _this3 = this;\n\n            if (this._options.disableAnimation) {\n                document.body.removeChild(this._notification);\n                this._options.onDismiss && this._options.onDismiss.apply(this._notification);\n            } else {\n                this._notification.classList.remove('fadeInDown');\n                this._notification.classList.add('fadeOutUp');\n                setTimeout(function () {\n                    document.body.removeChild(_this3._notification);\n                    _this3._options.onDismiss && _this3._options.onDismiss.apply(_this3._notification);\n                }, 1000);\n            }\n        }\n    }, {\n        key: '_getNotificationClasses',\n        value: function _getNotificationClasses() {\n            var _this4 = this;\n\n            var notificationClasses = ['notification'];\n            this._options.position && Object.keys(this._options.position).forEach(function (key) {\n                _this4._options.position[key] && notificationClasses.push('notification-' + key);\n            });\n            this._options.className && notificationClasses.push(this._options.className);\n            !this._options.disableAnimation && notificationClasses.push('animated');\n            return notificationClasses.join(' ');\n        }\n    }]);\n\n    return Notification;\n}();\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 9 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export DomBuddy */\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DomBuddy = function () {\n    function DomBuddy() {\n        _classCallCheck(this, DomBuddy);\n    }\n\n    _createClass(DomBuddy, [{\n        key: 'addClass',\n\n        /**\n         * PUBLIC METHODS\n         */\n        value: function addClass(what) {\n            return {\n                to: this._to(function (it) {\n                    return it.classList.add(what);\n                })\n            };\n        }\n    }, {\n        key: 'removeClass',\n        value: function removeClass(what) {\n            return {\n                from: this._to(function (it) {\n                    return it.classList.remove(what);\n                })\n            };\n        }\n    }, {\n        key: 'prepend',\n        value: function prepend(what) {\n            var _this = this;\n\n            return {\n                to: this._to(function (it) {\n                    return it.insertAdjacentHTML('afterbegin', _this._normalize(what));\n                }),\n                before: this._to(function (it) {\n                    return it.insertAdjacentHTML('beforebegin', _this._normalize(what));\n                })\n            };\n        }\n    }, {\n        key: 'append',\n        value: function append(what) {\n            var _this2 = this;\n\n            return {\n                to: this._to(function (it) {\n                    return it.insertAdjacentHTML('beforeend', _this2._normalize(what));\n                }),\n                after: this._to(function (it) {\n                    return it.insertAdjacentHTML('afterend', _this2._normalize(what));\n                })\n            };\n        }\n    }, {\n        key: 'clear',\n        value: function clear(what) {\n            return this._to(function (it) {\n                return it.innerHTML = '';\n            })(what);\n        }\n        /**\n         * PRIVATE METHODS\n         */\n\n    }, {\n        key: '_to',\n        value: function _to(how) {\n            var _this3 = this;\n\n            return function (what) {\n                var to = _this3._normalize(what, false);\n                [].concat(_toConsumableArray(to)).forEach(function (it) {\n                    return how(it);\n                });\n                return { then: _this3 };\n            };\n        }\n    }, {\n        key: '_normalize',\n        value: function _normalize(what) {\n            var toString = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n            if (what instanceof NodeList) return toString ? [].concat(_toConsumableArray(what)).map(function (it) {\n                return it.outerHTML;\n            }).join('\\n') : [].concat(_toConsumableArray(what));else if (what instanceof Node) return toString ? what.outerHTML : [what];else if (typeof what === 'string') return toString ? what : document.querySelectorAll(what);else throw new Error('DomBuddy was provided with an invalid value of ' + what);\n        }\n    }]);\n\n    return DomBuddy;\n}();\n\n/***/ }),\n/* 10 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return RSSUtility; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/** One week in seconds */\nvar ONE_WEEK = 7 * 24 * 60 * 60 * 1000;\n/** Cookie name to reuse for `trackLastViewed` */\nvar COOKIE_NAME = 'last-viewed-pubdate';\n/**\n * Utility class for RSS feed parsing and actions.\n *\n * @export\n * @class RSSUtility\n */\nvar RSSUtility = function () {\n    function RSSUtility() {\n        _classCallCheck(this, RSSUtility);\n    }\n\n    _createClass(RSSUtility, [{\n        key: 'parseItems',\n\n        /**\n         * Shortcut for pulling `<item>` objects out of an RSS feed.\n         * Receives an optional transform function that is applied\n         * to the items after they are extracted. Returns an array of\n         * either `RSS.Item` objects or a type specified in transform.\n         *\n         * @template I\n         * @template T\n         * @param {RSSFeed} data\n         * @param {(item: I) => T} [transform]\n         * @returns {((T | I)[])}\n         * @memberof RSSUtility\n         */\n        value: function parseItems(data, transform) {\n            var channelItems = data && data.rss.channel[0].item && data.rss.channel[0].item.length ? data.rss.channel[0].item : [];\n            return transform ? channelItems.map(transform) : channelItems;\n        }\n        /**\n         * Optionally check the publish date of an incoming RSS data object\n         * against a cookie set to the publish date of the last viewed data.\n         * If the dates do not match, stores the new date in the cookie. Returns\n         * true if viewed already, false if not.\n         *\n         * @param {RSSFeed} data\n         * @memberof RSSUtility\n         */\n\n    }, {\n        key: 'checkViewStatus',\n        value: function checkViewStatus(type, data) {\n            var cookieName = COOKIE_NAME + '_' + encodeURIComponent(type);\n            var cookieDate = void 0;\n            try {\n                var pubDate = (data.rss.channel[0].pubDate || data.rss.channel[0].item[0].pubDate)[0];\n                cookieDate = new Date(pubDate).getTime().toString();\n            } catch (err) {\n                console.warn('Error parsing RSS pubDate: ' + err);\n                return;\n            }\n            var lastViewedPubDate = this._getCookie(cookieName);\n            if (cookieDate !== lastViewedPubDate) {\n                this._setCookie(cookieName, cookieDate);\n                return false;\n            } else {\n                return true;\n            }\n        }\n        /**\n         * Gets a document cookie value by name.\n         *\n         * @private\n         * @param {any} name\n         * @memberof RSSUtility\n         */\n\n    }, {\n        key: '_getCookie',\n        value: function _getCookie(name) {\n            var value = '; ' + document.cookie;\n            var parts = value.split('; ' + name + '=');\n            if (parts.length === 2) {\n                return parts.pop().split(';').shift();\n            }\n        }\n        /**\n         * Sets a document cookie by name to a given value and sets\n         * an expiry date of one week from now.\n         *\n         * @private\n         * @param {any} name\n         * @param {any} value\n         * @memberof RSSUtility\n         */\n\n    }, {\n        key: '_setCookie',\n        value: function _setCookie(name, value) {\n            var date = new Date();\n            date.setTime(date.getTime() + ONE_WEEK);\n            document.cookie = name + '=' + value + '; expires=' + date.toUTCString() + '; path=/;';\n        }\n    }]);\n\n    return RSSUtility;\n}();\n\n/***/ }),\n/* 11 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return MessageBase; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar MessageBase = function () {\n    function MessageBase() {\n        _classCallCheck(this, MessageBase);\n    }\n\n    _createClass(MessageBase, [{\n        key: 'formatDate',\n        value: function formatDate(dateString) {\n            var date = new Date(dateString);\n            return [MessageBase.months[date.getMonth()], ' ', date.getDate(), ', ', date.getFullYear(), ' ', this.leadingZero(date.getHours()), ':', this.leadingZero(date.getMinutes())].join('');\n        }\n    }, {\n        key: 'leadingZero',\n        value: function leadingZero(number) {\n            return number < 10 ? '0' + number : number;\n        }\n    }, {\n        key: 'pluck',\n        value: function pluck(obj, props) {\n            // return Object.assign({}, ...props.map(prop => ({[prop]: obj[prop]})));\n            return props.reduce(function (result, key) {\n                result[key] = obj[key];return result;\n            }, {});\n        }\n    }]);\n\n    return MessageBase;\n}();\nMessageBase.months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n\n/***/ }),\n/* 12 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return TYPE_DISRUPTION; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ServiceDisruption; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0____ = __webpack_require__(0);\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\nvar TYPE_DISRUPTION = 'disruption';\nvar ServiceDisruption = function (_MessageBase) {\n    _inherits(ServiceDisruption, _MessageBase);\n\n    function ServiceDisruption(item) {\n        _classCallCheck(this, ServiceDisruption);\n\n        var _this = _possibleConstructorReturn(this, (ServiceDisruption.__proto__ || Object.getPrototypeOf(ServiceDisruption)).call(this));\n\n        var content = _this.extractContent(item);\n        Object.assign(_this, content);\n        return _this;\n    }\n\n    _createClass(ServiceDisruption, [{\n        key: 'extractContent',\n        value: function extractContent(_ref) {\n            var _ref$title = _slicedToArray(_ref.title, 1),\n                title = _ref$title[0],\n                _ref$description = _slicedToArray(_ref.description, 1),\n                description = _ref$description[0],\n                _ref$link = _slicedToArray(_ref.link, 1),\n                link = _ref$link[0],\n                _ref$guid = _slicedToArray(_ref.guid, 1),\n                guid = _ref$guid[0]._,\n                _ref$summary = _slicedToArray(_ref.summary, 1),\n                summary = _ref$summary[0],\n                _ref$article = _slicedToArray(_ref.article, 1),\n                article = _ref$article[0],\n                _ref$pubDate = _slicedToArray(_ref.pubDate, 1),\n                pubDate = _ref$pubDate[0],\n                rawCategory = _ref.category,\n                rawMedia = _ref['media:content'];\n\n            var category = void 0,\n                media = {};\n            if (rawMedia && rawMedia.length) {\n                var _rawMedia = _slicedToArray(rawMedia, 1),\n                    _rawMedia$0$$ = _rawMedia[0].$,\n                    mediaContent = _rawMedia$0$$.url,\n                    mediaDescription = _rawMedia$0$$.description;\n\n                media = { mediaContent: mediaContent, mediaDescription: mediaDescription };\n            }\n            if (rawCategory && rawCategory.length) {\n                var _rawCategory = _slicedToArray(rawCategory, 1),\n                    categoryText = _rawCategory[0]._;\n\n                category = categoryText;\n            }\n            return Object.assign({ title: title, description: description, link: link,\n                guid: guid, summary: summary }, { category: category }, { pubDate: this.formatDate(pubDate), article: article }, media);\n        }\n    }]);\n\n    return ServiceDisruption;\n}(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* MessageBase */]);\n\n/***/ }),\n/* 13 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return TYPE_EMERGENCY; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return EmergencyMessage; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0____ = __webpack_require__(0);\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\nvar TYPE_EMERGENCY = 'emergency';\nvar EmergencyMessage = function (_MessageBase) {\n    _inherits(EmergencyMessage, _MessageBase);\n\n    function EmergencyMessage(item) {\n        _classCallCheck(this, EmergencyMessage);\n\n        var _this = _possibleConstructorReturn(this, (EmergencyMessage.__proto__ || Object.getPrototypeOf(EmergencyMessage)).call(this));\n\n        var content = _this.extractContent(item);\n        Object.assign(_this, content);\n        return _this;\n    }\n\n    _createClass(EmergencyMessage, [{\n        key: 'extractContent',\n        value: function extractContent(_ref) {\n            var _ref$title = _slicedToArray(_ref.title, 1),\n                title = _ref$title[0],\n                _ref$description = _slicedToArray(_ref.description, 1),\n                description = _ref$description[0],\n                _ref$link = _slicedToArray(_ref.link, 1),\n                link = _ref$link[0],\n                _ref$guid = _slicedToArray(_ref.guid, 1),\n                guid = _ref$guid[0]._,\n                _ref$pubDate = _slicedToArray(_ref.pubDate, 1),\n                pubDate = _ref$pubDate[0];\n\n            return {\n                title: title, description: description, link: link,\n                guid: guid, pubDate: this.formatDate(pubDate)\n            };\n        }\n    }]);\n\n    return EmergencyMessage;\n}(__WEBPACK_IMPORTED_MODULE_0____[\"b\" /* MessageBase */]);\n\n/***/ }),\n/* 14 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export TYPE_WEATHER */\n// import { MessageBase, RawBase } from '.';\nvar TYPE_WEATHER = 'weather';\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// main-bundle.529a7d8575854268546d.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 529a7d8575854268546d","import { SocketPollClient } from 'mighty-polling-socket-server';\nimport './styles/main.scss';\n\nimport {\n  RSSUtility,\n  RSSFeed,\n  Notification\n} from './lib';\nimport { \n  ServiceDisruption,\n  ServiceDisruptionRSSItem,\n  EmergencyMessage,\n  TYPE_DISRUPTION,\n  TYPE_EMERGENCY,\n} from './models';\n\nconst REDIRECT_URL = 'http://uoit.ca/emergency';\n\nconst rss = new RSSUtility();\nconst toast = new Notification();\nconst client = new SocketPollClient();\n\n/**\n * Hold references to all feed containers (also provides a null checks).\n */\nconst emergencyMessageBar = document.getElementById('emergencyMessageBar');\nconst emergencyFeedMessage = document.getElementById('emergencyFeedMessage');\nconst serviceDisruptionMessage = document.getElementById('serviceDisruptionMessage');\n\n/**\n * A bind-ready function for running a 5-second countdown\n * inside the notification displayed before emergency message\n * redirects, to notify of impending redirection.\n */\nconst onNotify = function startCountdown() {\n  let secondsLeft = 5, countdownDone = false;\n  const elements: Element[] = [...this.childNodes];\n  const countdownEl = elements.find(el => el.classList && el.classList.contains('countdown'));\n  countdownEl.innerHTML = `${secondsLeft} seconds`;\n  const ticker = setInterval(() => {\n    secondsLeft--;\n    countdownDone = secondsLeft === 0;\n    countdownEl.innerHTML = countdownDone ? 'Now!' : `${secondsLeft} seconds`;\n    countdownDone && clearInterval(ticker);\n  }, 1000)\n};\n\n/**\n * Performs a redirect after notification has been dismissed.\n */\nconst onDismiss = () => document.location.assign(REDIRECT_URL);\n\n/**\n * Listens to incoming service disruption socket data. Responsible for\n * mapping `ServiceDisruptionRSSItem` objects to more useful `ServiceDisruption`\n * instances, and building a templated list from the items (if any).\n */\nclient.on<TYPE_DISRUPTION, RSSFeed>(TYPE_DISRUPTION, ({ data }) => {\n  /** Sets and compares a cookie of last viewed pubDate */\n  const viewedBefore = rss.checkViewStatus(TYPE_DISRUPTION, data);\n\n  if (serviceDisruptionMessage) {\n    const rssItems = rss.parseItems(data, (item: ServiceDisruptionRSSItem) => new ServiceDisruption(item));\n\n    if (rssItems.length) {\n      const html = rssItems.map((item: ServiceDisruption)  => `<div class=\"emergencyNewsItem\">\n        <a href=\"${ item.link }\" title=\"${ item.title }\"><img src=\"${ item.mediaContent }\" alt=\"${ item.mediaDescription }\" width=\"100\" height=\"67\"></a>\n        <p><strong><a href=\"${ item.link }\">${ item.title }</strong></a></p>\n        <p class=\"date\">${ item.pubDate }</p>\n      </div>`).join('\\n');\n      serviceDisruptionMessage.innerHTML = html;\n    }\n  // } else {\n    if (!viewedBefore) {\n      /** If not viewed, show notification and redirect to new page */\n      const html = `<span class=\"icon_emergency warning text-larger\"></span>\n        <strong>Notice:</strong> A new service disruption has been posted! \n        <a href=\"#\"><strong>More info &raquo;</strong></a>`;\n\n      toast.notify(html, {\n        duration: 8000,\n        className: 'warning',\n        position: {\n          right: true,\n          bottom: true\n        }\n      });\n    }\n  }\n});\n\n/**\n * Listens to incoming emergency message socket data. Responsible for\n * mapping `RSSItem` objects to more useful `EmergencyMessage`\n * instances, and building a templated list from the items (if any).\n * \n * Checks and tracks view status of last received message; if last\n * has not been tracked as viewed, prompts user with a notification\n * and redirects to a new page. If already viewed, displays info bar.\n */\nclient.on<TYPE_EMERGENCY, RSSFeed>(TYPE_EMERGENCY, ({ data }) => {\n  /** Sets and compares a cookie of last viewed pubDate */\n  const viewedBefore = rss.checkViewStatus(TYPE_EMERGENCY, data);\n  const rssItems = rss.parseItems(data, item => new EmergencyMessage(item));\n\n  if (rssItems.length) {\n    if (emergencyFeedMessage) {\n      const html = rssItems.map(item => `<p class=\"emergencyTitle\">${item.title}</p>\n        <p class=\"emergencyDesc\">${item.description}</p>\n        <p class=\"emergencyDate\">${item.pubDate}</p>`).join('\\n');\n      emergencyFeedMessage.innerHTML = html;\n    }\n\n    if (emergencyMessageBar && viewedBefore) {\n      /** If viewed before, just display info bar */\n      const html = rssItems.map(item => `<div class=\"row\">\n        <a href=\"${REDIRECT_URL}\">\n          <div class=\"emergencyAlert\">\n          Emergency Alert\n          </div>\n          <div class=\"emergencyMessage\">\n            <span class=\"emergencyTitle\">${item.title}</span>\n            <span class=\"emergencyDesc\">${item.description}</span>\n            <span class=\"emergencyDate\">${item.pubDate}</span>\n          </div>\n        </a>\n      </div>`).join('\\n');\n      emergencyMessageBar.innerHTML = html;\n    }\n\n    if (!viewedBefore) { //!emergencyMessageBar && !emergencyFeedMessage && \n      /** If not viewed, show notification and redirect to new page */\n      const html = `<span class=\"icon_emergency alert text-larger\"></span>\n        <strong>Notice:</strong> You are about to be redirected to an emergency message!\n        <br/><small>Redirecting in:</small> <strong class=\"countdown\"></strong>`;\n\n      toast.notify(html, {\n        duration: 5000,\n        className: 'alert',\n        position: {\n          right: true,\n          bottom: true\n        },\n        onNotify,\n        onDismiss\n      });\n    }\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./client/index.ts","/**\n * Base class for providing a simple proxy to an instantiated\n * `WebSocket` connection.\n *\n * @export\n * @class SocketConnection\n */\nvar SocketConnection = /** @class */ (function () {\n    function SocketConnection(url, endpoint) {\n        if (!url) {\n            var location_1 = document.location;\n            var host = location_1.host, protocol = location_1.protocol, port = location_1.port;\n            url = protocol.replace(/http/, 'ws') + \"//\" + host.replace(/:.*/, '') + (port ? ':8080' : '');\n        }\n        url = url + \"/\" + (endpoint || '');\n        this.connection = new WebSocket(url);\n    }\n    SocketConnection.prototype.onMessage = function (callback) {\n        this.connection.onmessage = callback;\n    };\n    SocketConnection.prototype.close = function () {\n        this.connection.close();\n    };\n    SocketConnection.prototype.send = function (what) {\n        this.connection.send(what);\n    };\n    return SocketConnection;\n}());\nexport { SocketConnection };\n//# sourceMappingURL=socket.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/mighty-polling-socket-server/dist-esm/socket.js\n// module id = 3\n// module chunks = 0","import { SocketConnection } from '.';\n/**\n * This class represents the base hub for all socket poll related\n * messaging and action. Its primary purpose is to pre-initialize a\n * socket connection, as well as provide callback functions for all\n * configured message types.\n *\n * @example\n * // configure a message type\n * const TYPE_EMERGENCY = 'emergency';\n * // initialize a new feed\n * const feed = new SocketPollClient();\n * // assign an action to a message type\n * feed.on(TYPE_EMERGENCY, items => {...});\n *\n * @export\n * @class SocketPollClient\n */\nvar SocketPollClient = /** @class */ (function () {\n    function SocketPollClient() {\n        this._typeCallbacks = {};\n    }\n    /**\n     * @template T\n     * @param {string} type\n     * @param {(items: T) => void} callback\n     * @memberof SocketPollClient\n     */\n    SocketPollClient.prototype.on = function (type, callback) {\n        this._typeCallbacks[type] = callback;\n        this.addSocketListener(type);\n    };\n    /**\n     * Initializes event listener for socket messages with the\n     * pre-initialized socket connection; passes event data from\n     * message to this class' `onMessage` method.\n     *\n     * @private\n     * @template T\n     * @template D\n     * @param {T} type\n     * @memberof SocketPollClient\n     */\n    SocketPollClient.prototype.addSocketListener = function (type) {\n        var _this = this;\n        var socket = new SocketConnection(null, type);\n        socket.onMessage(function (event) { return _this.onMessage(type, event); });\n        console.log(\"[socket] added listener for \\\"\" + type + \"\\\"\");\n    };\n    /**\n     * Receives a socket's `MessageEvent`; parses the raw string data\n     * into a usable object; determines the type of emergency message\n     * and calls the appropriate callback with the parsed data as its\n     * first argument.\n     *\n     * @private\n     * @template T\n     * @template D\n     * @param {T} type\n     * @param {MessageEvent} event\n     * @memberof SocketPollClient\n     */\n    SocketPollClient.prototype.onMessage = function (type, event) {\n        var eventData = JSON.parse(event.data);\n        console.log(\"[socket] \" + eventData.type + \" message received\", eventData);\n        this._typeCallbacks[type](eventData);\n    };\n    return SocketPollClient;\n}());\nexport { SocketPollClient };\n//# sourceMappingURL=socket-client.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/mighty-polling-socket-server/dist-esm/socket-client.js\n// module id = 4\n// module chunks = 0","import '../styles/notification.scss';\n\nexport type NotificationOptions = Partial<{\n  duration: number,\n  className: string,\n  countdown: boolean,\n  position: Partial<{\n    left: boolean,\n    right: boolean,\n    top: boolean,\n    bottom: boolean\n  }>,\n  disableAnimation: boolean,\n  onNotify(): void,\n  onDismiss(): void\n}>;\n\nexport class Notification {\n  private _options: NotificationOptions;\n  private _notification: Element;\n\n  constructor(private _defaults: NotificationOptions = {}) { }\n\n  notify(message: string, options: NotificationOptions = {}) {\n    this._options = {...this._defaults, ...options};\n    this._notification = this._getNotification(message);\n    this._transitionIn();\n    if (this._options.duration) {\n      setTimeout(() => {\n        this._transitionOut();\n      }, this._options.duration);\n    }\n    return this;\n  }\n\n  dismiss() {\n    this._transitionOut();\n  }\n\n  private _getNotification(message: string) {\n    const notificationClasses = this._getNotificationClasses();\n    const template = document.createElement('template');\n    template.innerHTML = `<div data-closable class=\"callout alert-callout ${notificationClasses}\">\n      ${message}\n      <button class=\"close-button\" aria-label=\"Dismiss alert\" type=\"button\" data-close>\n        <span aria-hidden=\"true\"></span>\n      </button>\n    </div>`;\n    return template.content.firstChild as Element;\n  }\n\n  private _transitionIn() {\n    if (this._options.disableAnimation) {\n      document.body.appendChild(this._notification);\n      this._options.onNotify && this._options.onNotify.apply(this._notification);\n    } else {\n      this._notification.classList.remove('fadeOutUp');\n      this._notification.classList.add('fadeInDown');\n      document.body.appendChild(this._notification);\n      setTimeout(() => {\n        this._options.onNotify && this._options.onNotify.apply(this._notification);\n      }, 1000);\n    }\n  }\n\n  private _transitionOut() {\n    if (this._options.disableAnimation) {\n      document.body.removeChild(this._notification);\n      this._options.onDismiss && this._options.onDismiss.apply(this._notification);\n    } else {\n      this._notification.classList.remove('fadeInDown');\n      this._notification.classList.add('fadeOutUp');\n      setTimeout(() => {\n        document.body.removeChild(this._notification);\n        this._options.onDismiss && this._options.onDismiss.apply(this._notification);\n      }, 1000);\n    }\n  }\n\n  private _getNotificationClasses() {\n    const notificationClasses = ['notification'];\n    this._options.position && Object.keys(this._options.position).forEach(key => {\n      this._options.position[key] && notificationClasses.push(`notification-${key}`);\n    });\n    this._options.className && notificationClasses.push(this._options.className);\n    !this._options.disableAnimation && notificationClasses.push('animated');\n    return notificationClasses.join(' ');\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./client/lib/notification.ts","export class DomBuddy {\n  /**\n   * PUBLIC METHODS\n   */\n  addClass(what) {\n    return {\n      to: this._to((it: HTMLElement) => it.classList.add(what))\n    };\n  }\n  removeClass(what) {\n    return {\n      from: this._to((it: HTMLElement) => it.classList.remove(what))\n    };\n  }\n  prepend(what) {\n    return {\n      to: this._to((it: HTMLElement) => it.insertAdjacentHTML('afterbegin', this._normalize(what) as string)),\n      before: this._to((it: HTMLElement) => it.insertAdjacentHTML('beforebegin', this._normalize(what) as string))\n    };\n  }\n  append(what) {\n    return {\n      to: this._to((it: HTMLElement) => it.insertAdjacentHTML('beforeend', this._normalize(what) as string)),\n      after: this._to((it: HTMLElement) => it.insertAdjacentHTML('afterend', this._normalize(what) as string))\n    };\n  }\n  clear(what) {\n    return this._to((it: HTMLElement) => it.innerHTML = '')(what);\n  }\n\n  /**\n   * PRIVATE METHODS\n   */\n  _to(how: (it: Node) => void): (what: Node) => { then: DomBuddy } {\n    return what => {\n      const to = this._normalize(what, false);\n      [...to].forEach((it: Node) => how(it))\n      return { then: this };\n    };\n  }\n  _normalize(what, toString = true) {\n    if (what instanceof NodeList) return toString\n      ? [...what].map(it => (<HTMLElement>it).outerHTML).join('\\n')\n      : [...what]\n    else if (what instanceof Node) return toString\n      ? (<HTMLElement>what).outerHTML\n      : [what]\n    else if (typeof what === 'string') return toString\n      ? what\n      : document.querySelectorAll(what)\n    else throw new Error(`DomBuddy was provided with an invalid value of ${what}`);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./client/lib/dom.ts","import { RSS } from 'mighty-polling-socket-server';\n\n/** Container type for `xml2js` RSS feeds */\nexport type RSSFeed = { rss: RSS.Feed };\n\n/** One week in seconds */\nconst ONE_WEEK = 7*24*60*60*1000;\n/** Cookie name to reuse for `trackLastViewed` */\nconst COOKIE_NAME = 'last-viewed-pubdate';\n\n/**\n * Utility class for RSS feed parsing and actions.\n * \n * @export\n * @class RSSUtility\n */\nexport class RSSUtility {\n  /**\n   * Shortcut for pulling `<item>` objects out of an RSS feed.\n   * Receives an optional transform function that is applied\n   * to the items after they are extracted. Returns an array of\n   * either `RSS.Item` objects or a type specified in transform.\n   * \n   * @template I \n   * @template T \n   * @param {RSSFeed} data \n   * @param {(item: I) => T} [transform] \n   * @returns {((T | I)[])} \n   * @memberof RSSUtility\n   */\n  parseItems<I extends RSS.Item, T>(data: RSSFeed, transform?: (item: I) => T): (T | I)[] {\n      const channelItems: (T | I)[] = data && data.rss.channel[0].item && data.rss.channel[0].item.length\n        ? <I[]>data.rss.channel[0].item\n        : [];\n      return transform ? channelItems.map(transform) : channelItems;\n  }\n\n  /**\n   * Optionally check the publish date of an incoming RSS data object\n   * against a cookie set to the publish date of the last viewed data.\n   * If the dates do not match, stores the new date in the cookie. Returns\n   * true if viewed already, false if not.\n   * \n   * @param {RSSFeed} data\n   * @memberof RSSUtility\n   */\n  checkViewStatus(type: string, data: RSSFeed) {\n    const cookieName = `${COOKIE_NAME}_${encodeURIComponent(type)}`;\n    let cookieDate;\n    try {\n      const pubDate = (data.rss.channel[0].pubDate || data.rss.channel[0].item[0].pubDate)[0];\n      cookieDate = new Date(pubDate).getTime().toString();\n    } catch (err) {\n      console.warn(`Error parsing RSS pubDate: ${err}`);\n      return;\n    }\n    const lastViewedPubDate = this._getCookie(cookieName);\n    if (cookieDate !== lastViewedPubDate) {\n      this._setCookie(cookieName, cookieDate);\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  /**\n   * Gets a document cookie value by name.\n   * \n   * @private\n   * @param {any} name\n   * @memberof RSSUtility\n   */\n  private _getCookie(name) {\n    const value = `; ${document.cookie}`;\n    const parts = value.split(`; ${name}=`);\n    if (parts.length === 2) {\n      return parts.pop().split(';').shift();\n    }\n  }\n\n  /**\n   * Sets a document cookie by name to a given value and sets\n   * an expiry date of one week from now.\n   * \n   * @private\n   * @param {any} name \n   * @param {any} value \n   * @memberof RSSUtility\n   */\n  private _setCookie(name, value) {\n    const date = new Date();\n    date.setTime(date.getTime() + ONE_WEEK);\n    document.cookie = `${name}=${value}; expires=${date.toUTCString()}; path=/;`;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/lib/rss.ts","export class MessageBase {\n  private static months = [\n    'January', 'February', 'March',\n    'April', 'May', 'June', 'July',\n    'August', 'September', 'October',\n    'November', 'December'\n  ];\n  protected formatDate?(dateString) {\n    const date = new Date(dateString);\n    return [\n      MessageBase.months[date.getMonth()],\n      ' ', date.getDate(),\n      ', ', date.getFullYear(),\n      ' ', this.leadingZero(date.getHours()),\n      ':', this.leadingZero(date.getMinutes())\n    ].join('');\n  }\n  protected leadingZero?(number) {\n    return number < 10 ? `0${number}` : number;\n  }\n  protected pluck?(obj, props) {\n    // return Object.assign({}, ...props.map(prop => ({[prop]: obj[prop]})));\n    return props.reduce((result, key) => { result[key] = obj[key]; return result; }, {});\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./client/models/message-base.ts","import { XML, RSSExtras } from 'mighty-polling-socket-server';\n\nimport { MessageBase } from '.';\n\nexport const TYPE_DISRUPTION = 'disruption';\nexport type TYPE_DISRUPTION = typeof TYPE_DISRUPTION;\n\nexport type ServiceDisruptionRSSItemContent = {\n  summary: string;\n  article: string;\n}\nexport type ServiceDisruptionRSSItem = RSSExtras.ItemWithMedia & XML.WithContent<ServiceDisruptionRSSItemContent>\n\nexport class ServiceDisruption extends MessageBase {\n  title: string;\n  description: string;\n  link: string;\n  guid: string;\n  summary: string;\n  category: string;\n  pubDate: string;\n  article: string;\n  mediaContent?: string;\n  mediaDescription?: string;\n\n  constructor(item: ServiceDisruptionRSSItem) {\n    super();\n    const content = this.extractContent(item);\n    Object.assign(this, content);\n  }\n\n  private extractContent?({\n    title: [title], description: [description], link: [link],\n    guid: [{ _: guid }], summary: [summary],\n    article: [article], pubDate: [pubDate],\n    category: rawCategory, ['media:content']: rawMedia\n  }: ServiceDisruptionRSSItem): ServiceDisruption {\n    let category, media = {};\n\n    if (rawMedia && rawMedia.length) {\n      const [{\n        $: { url: mediaContent, description: mediaDescription }\n      }] = rawMedia;\n      media = { mediaContent, mediaDescription };\n    }\n\n    if (rawCategory && rawCategory.length) {\n      const [{ _: categoryText }] = rawCategory;\n      category = categoryText;\n    }\n\n    return {\n      title, description, link,\n      guid, summary, ...{ category },\n      pubDate: this.formatDate(pubDate),\n      article, ...media\n    };\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/models/service-disruption.ts","import { RSS } from 'mighty-polling-socket-server';\n\nimport { MessageBase } from '.';\n\nexport const TYPE_EMERGENCY = 'emergency';\nexport type TYPE_EMERGENCY = typeof TYPE_EMERGENCY;\n\nexport class EmergencyMessage extends MessageBase {\n  title: string;\n  description: string;\n  link: string;\n  guid: string;\n  pubDate: string;\n\n  constructor(item: RSS.Item) {\n    super();\n    const content = this.extractContent(item);\n    Object.assign(this, content);\n  }\n\n  private extractContent?({\n    title: [title], description: [description],\n    link: [link], guid: [{ _: guid }], pubDate: [pubDate]\n  }: RSS.Item): EmergencyMessage {\n    return {\n      title, description, link,\n      guid, pubDate: this.formatDate(pubDate),\n    };\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/models/emergency-message.ts"],"sourceRoot":""}